name: CI

on: [push, pull_request]

jobs:
  crtsh:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: crtsh - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:crtsh
  cryptcheck:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: cryptcheck - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:cryptcheck
  hstspreload:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: hstspreload - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:hstspreload
  httpobservatory:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: httpobservatory - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:httpobservatory
  lighthouse:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: lighthouse - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:lighthouse
  psi:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: psi - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:psi
  securityheaders:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: securityheaders - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:securityheaders
  ssldecoder:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: ssldecoder - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:ssldecoder
  ssllabs:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: ssllabs - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:ssllabs
        continue-on-error: true
  webbkoll:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: webbkoll - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:webbkoll
  webhint:
    strategy:
      matrix:
        platform: [ubuntu-latest]
        node: [ '12', '10' ]
    name: webhint - Node ${{ matrix.node }} (${{ matrix.platform }})
    runs-on: ${{ matrix.platform }}
    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: ${{ matrix.node }}
      - name: install dependencies
        run: yarn
      - name: run tests
        run: yarn test:webhint